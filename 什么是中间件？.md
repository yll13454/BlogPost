>中间件（英语：Middleware），是提供系统软件和应用软件之间连接的软件，以便于软件各部件之间的沟通，特别是应用软件对于系统软件的集中的逻辑，在现代信息技术应用框架如Web服务、面向服务的体系结构等中应用比较广泛。如数据库、Apache的Tomcat，IBM公司的WebSphere,BEA公司的WebLogic应用服务器，东方通公司的Tong系列中间件，以及Kingdee公司的等都属于中间件。

web相关的中间件，简单点：

- 将具体业务和底层逻辑解耦的组件。
- 数据从底层到应用端的中转站。

# Node中间件

**『服务端设计的接口究竟是面向 UI 还是只是通用服务？』**

## BFF 的提出

2015 年，Sam Newman 对此提出了 [Pattern: Backends For Frontends](https://samnewman.io/patterns/architectural/bff/)，简称 BFF，国内也俗称为粘合层。

![img](media\1645aca773b56b6b)

 **在 BFF 理念中，最重要的一点是：服务自治，谁使用谁开发，即它应该由前端同学去维护。**

# Express中间件

## 中间件的功能和分类

中间件的本质就是一个函数，在收到请求和返回相应的过程中做一些我们想做的事情。Express文档中对它的作用是这么描述的：

> 执行任何代码。 修改请求和响应对象。 终结请求-响应循环。 调用堆栈中的下一个中间件。

Express文档中把他们分为了五类，但是他们的原理相同，只是用法不同：

> 应用级中间件 路由级中间件 错误处理中间件 内置中间件 第三方中间件

